<footer class="site-footer">
  <p>© {{ "now" | date: "%Y" }} DCV Designs</p>

  <div class="social with-labels">
    <a href="https://www.instagram.com/dcv.designs/" target="_blank" rel="noopener" aria-label="Instagram — dcv.designs">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5z" stroke="currentColor" stroke-width="1.5"/><path d="M16.5 7.5h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="12" cy="12" r="3.5" stroke="currentColor" stroke-width="1.5"/></svg>
      <span>@dcv.designs</span>
    </a>

    <a href="https://www.facebook.com/DCVDesigns" target="_blank" rel="noopener" aria-label="Facebook — DCVDesigns">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M13.5 21v-8.25h2.75l.5-3H13.5V7.75c0-.87.29-1.5 1.75-1.5H17V3.5c-.3-.04-1.33-.13-2.53-.13-2.5 0-4.22 1.52-4.22 4.31V9.75H7.5v3h2.75V21h3.25Z" fill="currentColor"/></svg>
      <span>DCVDesigns</span>
    </a>
  </div>
</footer>
<script>
document.addEventListener('DOMContentLoaded', function(){
  // Respect user motion preference
  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (prefersReduced) return;

  // Guard: avoid double-mount if any page inlines a similar script
  if (window.__dcvRevealMounted) return;
  window.__dcvRevealMounted = true;

  // Helpers
  function prime(nodes){ nodes.forEach(el => el.classList.add('reveal-init')); }
  function addStagger(containerSelector, itemSelector){
    document.querySelectorAll(containerSelector).forEach(container => {
      const kids = container.querySelectorAll(itemSelector);
      kids.forEach((el, i) => el.style.setProperty('--delay', (i * 60) + 'ms'));
    });
  }

  // Prime typical elements (expanded/robust for About)
  prime(document.querySelectorAll('.hero > *'));
  prime(document.querySelectorAll('.page h1'));
  prime(document.querySelectorAll('.page h2'));
  prime(document.querySelectorAll('.page p'));
  prime(document.querySelectorAll('.page ul li'));
  // Prime all direct children inside the main content area on pages
  prime(document.querySelectorAll('.page .content > *'));
  // Fallback: if content isn't wrapped with .content, prime direct children of .page
  prime(document.querySelectorAll('.page > *'));

  prime(document.querySelectorAll('.announce'));
  prime(document.querySelectorAll('.project-image'));
  prime(document.querySelectorAll('.card-grid .card'));
  // About page CTA row buttons
  prime(document.querySelectorAll('.cta-row a'));

  // Staggers
  addStagger('.card-grid', '.card');
  addStagger('.cta-row', 'a');
  // Stagger direct children of the page content (About)
  document.querySelectorAll('.page .content').forEach(section => {
    Array.from(section.children).forEach((el, i) => el.style.setProperty('--delay', (i * 60) + 'ms'));
  });
  // Fallback stagger for .page direct children (if no .content wrapper)
  document.querySelectorAll('.page').forEach(section => {
    // Only apply if it doesn't have a .content wrapper
    if (!section.querySelector(':scope > .content')) {
      Array.from(section.children).forEach((el, i) => el.style.setProperty('--delay', (i * 60) + 'ms'));
    }
  });

  // Observe and reveal once
  const io = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting){
        entry.target.classList.add('reveal-in');
        entry.target.classList.remove('reveal-init');
        obs.unobserve(entry.target);
      }
    });
  }, { rootMargin: '0px 0px -8% 0px', threshold: 0.12 });

  document.querySelectorAll('.reveal-init').forEach(el => io.observe(el));
});
</script>